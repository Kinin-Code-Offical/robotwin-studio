{
  "title": "RobotTwin Studio Implementation Plan (Golden Path)",
  "description": "Optimized implementation order: Foundation -> Realtime -> High Fidelity -> Raspberry Pi -> Polish",
  "progress": {
    "lastUpdated": "2026-01-06",
    "completedIssues": [
      103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117,
      121, 184, 129, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 152, 153,
      154, 155, 156, 157, 158, 159, 161, 162, 163, 164, 165, 167, 168, 169, 170,
      175, 176, 177, 178, 179, 180, 181, 182, 183, 191, 192
    ],
    "notes": [
      {
        "date": "2026-01-06",
        "type": "implementation",
        "summary": "RPi runtime moved into FirmwareEngine (C++ backend, no Python in production)",
        "details": [
          "Added C++ RPi backend with QEMU lifecycle, memory-mapped channels, and status reporting.",
          "Unity runtime now only consumes shared memory (no host process start); board-gated firmware host launch passes RPi args.",
          "Replaced Python smoke test with .NET tool that exercises the production backend."
        ],
        "files": [
          "FirmwareEngine/Rpi/RpiBackend.h",
          "FirmwareEngine/Rpi/RpiBackend.cpp",
          "FirmwareEngine/Rpi/RpiShmProtocol.h",
          "FirmwareEngine/Rpi/RpiShm.h",
          "FirmwareEngine/Rpi/RpiShm.cpp",
          "FirmwareEngine/Rpi/QemuProcess.h",
          "FirmwareEngine/Rpi/QemuProcess.cpp",
          "FirmwareEngine/main.cpp",
          "tools/scripts/build_firmware.ps1",
          "RobotWin/Assets/Scripts/Game/SimHost.cs",
          "RobotWin/Assets/Scripts/Game/RaspberryPi/RpiRuntimeManager.cs",
          "RobotWin/Assets/Scripts/Game/RaspberryPi/RpiSharedMemoryChannel.cs",
          "RobotWin/Assets/Scripts/Game/RaspberryPi/RpiSharedMemoryTransport.cs",
          "RobotWin/Assets/Scripts/Game/RaspberryPi/RpiRuntimeConfig.cs",
          "tools/RpiSmokeTest/Program.cs",
          "tools/RpiSmokeTest/RpiSmokeTest.csproj",
          "tools/scripts/rpi_smoke_test.ps1",
          "logs/tools/rpi_smoke_test.log",
          "logs/firmware/build.log",
          "docs/implementation_plan_todo.md",
          "docs/implementation_plan.json"
        ]
      },
      {
        "date": "2026-01-06",
        "type": "implementation",
        "summary": "Raspberry Pi Phase 4 MVP bridge (mock QEMU + shared memory)",
        "details": [
          "Added shared memory transport (display, camera, GPIO, IMU, time, network) with a mock QEMU host loop.",
          "Unity runtime starts/stops the host process and surfaces the display in RunMode UI.",
          "Smoke test validates display + GPIO/camera updates via tools/rt_tool.py rpi-smoke."
        ],
        "files": [
          "tools/rpi/rpi_host.py",
          "tools/rpi/rpi_shm.py",
          "tools/rpi/rpi_smoke_test.py",
          "tools/scripts/rpi_smoke_test.ps1",
          "tools/rt_tool.py",
          "RobotWin/Assets/Scripts/Game/RaspberryPi/RpiRuntimeConfig.cs",
          "RobotWin/Assets/Scripts/Game/RaspberryPi/RpiRuntimeManager.cs",
          "RobotWin/Assets/Scripts/Game/RaspberryPi/RpiSharedMemoryChannel.cs",
          "RobotWin/Assets/Scripts/Game/RaspberryPi/RpiSharedMemoryTransport.cs",
          "RobotWin/Assets/Scripts/Game/SimHost.cs",
          "RobotWin/Assets/Scripts/UI/RunMode/RunModeController.cs",
          "RobotWin/Assets/UI/RunMode/RunMode.uxml",
          "RobotWin/Assets/UI/RunMode/RunMode.uss",
          "logs/rpi/rpi_smoke.log",
          "logs/tools/rpi_smoke_test.log",
          "docs/TESTING.md",
          "docs/implementation_plan_todo.md",
          "docs/implementation_plan.json"
        ]
      },
      {
        "date": "2026-01-06",
        "type": "architecture",
        "summary": "Finalization direction: unify firmware backends in FirmwareEngine (C++), remove Python runtime host",
        "details": [
          "The Phase 4 Raspberry Pi work is treated as an MVP tooling bridge; the production path should move into FirmwareEngine (single executable hosting both Arduino/AVR and RaspberryPi/QEMU).",
          "The final system should not generate mock sensor data in the runtime path; if QEMU is unavailable, the Raspberry Pi board is marked unavailable.",
          "Peripherals (camera, IMU, GPIO, audio/microphone, networking, RF/RC, USB device bridging) should be unified under a shared device graph/binding model and kept disableable with near-zero overhead when unused.",
          "RPi/QEMU connectivity must support both: (1) serial/terminal workflows via QEMU chardev (pipe/socket) and (2) an optional Windows COM exposure layer (com0com) for IDE/monitor integration, with strict feature-gating so unused paths allocate/spawn nothing.",
          "USB bridging is a separate feature area: support simulated USB device classes (HID/CDC/mass storage) and/or passthrough/redirect modes where feasible, and keep it opt-in so it does not impact baseline performance."
        ],
        "issues": [191, 192, 193, 194, 195, 196, 197]
      },
      {
        "date": "2026-01-06",
        "type": "planning",
        "summary": "Phase 7 skeleton expanded: RPi serial bridge + USB bridge scope",
        "details": [
          "Added explicit plan coverage for RPi/QEMU serial bridging (pipe/socket; optional com0com COM exposure) and clarified USB bridge scope (simulated device classes + optional passthrough).",
          "Both features are required to be strictly disableable: no worker threads, device handles, or buffers unless the board/profile and user configuration enables them.",
          "Expanded NET-01 expectations: WiFi/Bluetooth should be modeled as an environment (AP/router objects, client devices, distance/obstacles) with link quality that changes over time (RSSI/SNR, bandwidth/latency/jitter, dropouts) and supports an optional bridge-to-real mode (host NIC/Bluetooth adapter) for external connectivity.",
          "NET-01 should be implemented in tiers: Tier A deterministic/reference (default) and Tier B high-fidelity/stochastic (opt-in), both compatible with replay via seeding.",
          "USB bridging is intended to be full-functional via modular extensions: implement simulated USB device classes (HID/CDC/mass storage) and optional passthrough/redirect modes, while keeping all USB work fully opt-in to preserve baseline performance.",
          "Added IO-05 requirement: Raspberry Pi 5 board profiles must ship with a complete built-in hardware inventory exposed as device-graph endpoints (Circuit Studio bindings + WorldSim attachments). Fidelity may be tiered, but presence/connectability must be complete (no missing fan/USB/Ethernet/MIPI/HDMI/PCIe/WiFi/BT/PMIC/etc)."
        ],
        "files": [
          "docs/implementation_plan_todo.md",
          "docs/implementation_plan.json"
        ]
      },
      {
        "date": "2026-01-06",
        "type": "maintenance",
        "summary": "Golden trace recorder tool added (lockstep OutputState delivery fixed)",
        "details": [
          "Added a standalone recorder and rt_tool command to capture FirmwareEngine lockstep traces.",
          "Recorder can load a minimal BVM fixture and successfully records a golden trace end-to-end.",
          "Fixed a pipe read behavior where the firmware host could disconnect while the client was idle waiting for output, causing the recorder to time out."
        ],
        "files": [
          "tools/GoldenTraceRecorder/GoldenTraceRecorder.csproj",
          "tools/GoldenTraceRecorder/Program.cs",
          "tools/scripts/record_golden_trace.ps1",
          "tools/fixtures/firmware_minimal.bin",
          "tools/fixtures/firmware_minimal.bvm",
          "FirmwareEngine/PipeManager.cpp",
          "docs/TESTING.md",
          "docs/implementation_plan_todo.md",
          "docs/implementation_plan.json"
        ]
      },
      {
        "date": "2026-01-05",
        "type": "implementation",
        "summary": "High-fidelity physics features landed (thermal, environment, tolerance, noise)",
        "details": [
          "Thermal model coverage includes CoreSim runtime + tests and NativeEngine thermal integration.",
          "Environmental ambient/wind data now links from Unity physics to circuit thermal defaults.",
          "Component tolerance/aging and deterministic noise injection added with tests.",
          "Per-part physical overrides now drive mass/friction/elasticity/strength and native body updates."
        ],
        "files": [
          "CoreSim/src/RobotTwin.CoreSim/Models/Physics/ThermalModel.cs",
          "CoreSim/src/RobotTwin.CoreSim/Models/Physics/ComponentVariation.cs",
          "CoreSim/src/RobotTwin.CoreSim/Models/Physics/DeterministicNoise.cs",
          "CoreSim/tests/RobotTwin.CoreSim.Tests/ThermalModelTests.cs",
          "CoreSim/tests/RobotTwin.CoreSim.Tests/ComponentVariationTests.cs",
          "CoreSim/tests/RobotTwin.CoreSim.Tests/DeterministicNoiseTests.cs",
          "RobotWin/Assets/Scripts/CoreSim/Engine/CoreSimRuntime.cs",
          "RobotWin/Assets/Scripts/Game/NativePhysicsWorld.cs",
          "RobotWin/Assets/Scripts/Game/SimHost.cs",
          "RobotWin/Assets/Scripts/UI/RunMode/Circuit3DView.cs",
          "RobotWin/Assets/Scripts/UI/RunMode/ComponentPhysicalInfo.cs",
          "RobotWin/Assets/Scripts/UI/ComponentStudio/ComponentStudioController.cs",
          "RobotWin/Assets/Scripts/UI/CircuitStudio/CircuitStudioController.cs",
          "RobotWin/Assets/Scripts/Game/NativePhysicsBody.cs",
          "RobotWin/Assets/Scripts/Core/NativeBridge.cs",
          "NativeEngine/src/NativeEngine_Core.cpp",
          "NativeEngine/src/Physics/PhysicsWorld.cpp",
          "docs/implementation_plan_todo.md",
          "docs/implementation_plan.json"
        ]
      },
      {
        "date": "2026-01-06",
        "type": "implementation",
        "summary": "HF-06b/c/d validation + per-part mapping + volume policy",
        "details": [
          "Added a sample .rtcomp with physical overrides and a validation script wired into rt_tool.",
          "Per-part overrides now apply to matching NativePhysicsBody instead of splitting across all bodies.",
          "VolumeM3 is the preferred source of truth; UI and docs call this out explicitly."
        ],
        "files": [
          "tools/fixtures/hf06_sample.rtcomp",
          "tools/scripts/validate_physical_overrides.py",
          "tools/rt_tool.py",
          "RobotWin/Assets/Scripts/UI/RunMode/Circuit3DView.cs",
          "RobotWin/Assets/Scripts/Game/NativePhysicsBody.cs",
          "RobotWin/Assets/Scripts/Game/NativePhysicsWorld.cs",
          "RobotWin/Assets/Scripts/Core/NativeBridge.cs",
          "NativeEngine/src/NativeEngine_Core.cpp",
          "RobotWin/Assets/UI/ComponentStudio/ComponentStudio.uxml",
          "RobotWin/Assets/Scripts/UI/ComponentStudio/ComponentStudioController.cs",
          "RobotWin/Assets/Scripts/UI/CircuitStudio/CircuitStudioController.cs",
          "docs/HIGH_FIDELITY_PLAN.md",
          "docs/TESTING.md",
          "docs/implementation_plan_todo.md",
          "docs/implementation_plan.json"
        ]
      },
      {
        "date": "2026-01-05",
        "type": "implementation",
        "summary": "Optimized SyncInputs allocations in FirmwareEngine",
        "details": [
          "Replaced per-call unordered_map allocations with reusable scratch buffers.",
          "Firmware build completed successfully after the SyncInputs changes."
        ],
        "files": [
          "FirmwareEngine/VirtualMcu.cpp",
          "FirmwareEngine/VirtualMcu.h",
          "logs/firmware/build.log",
          "docs/implementation_plan_todo.md",
          "docs/implementation_plan.json"
        ]
      },
      {
        "date": "2026-01-05",
        "type": "maintenance",
        "summary": "Golden trace harness exists (real FirmwareEngine capture wired)",
        "details": [
          "Golden trace JSON format + replay harness + diff output exist and are covered by tests.",
          "Recording a trace from the real FirmwareEngine lockstep backend is now supported via tools/GoldenTraceRecorder."
        ],
        "files": [
          "docs/implementation_plan.json",
          "docs/implementation_plan_todo.md",
          "CoreSim/tests/RobotTwin.CoreSim.Tests/GoldenTraceHarnessTests.cs",
          "CoreSim/tests/RobotTwin.CoreSim.Tests/Fixtures/golden_trace_v1.json"
        ]
      },
      {
        "date": "2026-01-05",
        "type": "maintenance",
        "summary": "Aligned RT-06/RT-15 completion status",
        "details": [
          "RT-06 now uses next-event scheduling with circuit-only events and external physics stepping.",
          "RT-15 protocol negotiation flags and payload guards are fully covered by tests.",
          "Synced completion tracking with implementation_plan_todo.md and GitHub issue state."
        ],
        "files": [
          "docs/implementation_plan.json",
          "docs/implementation_plan_todo.md",
          "RobotWin/Assets/Scripts/Game/SimHost.cs",
          "RobotWin/Assets/Scripts/Game/NativePhysicsWorld.cs",
          "FirmwareEngine/Protocol.h",
          "FirmwareEngine/PipeManager.cpp",
          "CoreSim/src/RobotTwin.CoreSim/IPC/FirmwareProtocol.cs",
          "CoreSim/tests/RobotTwin.CoreSim.Tests/FirmwareProtocolTests.cs"
        ]
      },
      {
        "date": "2026-01-05",
        "type": "maintenance",
        "summary": "Aligned completion tracking with implemented work",
        "details": [
          "Updated completedIssues to match the DONE markers in docs/implementation_plan_todo.md.",
          "Removed speculative or decision-only completions that were not explicitly confirmed."
        ],
        "files": [
          "docs/implementation_plan.json",
          "docs/implementation_plan_todo.md"
        ]
      },
      {
        "date": "2026-01-05",
        "type": "implementation",
        "summary": "RTFW client hardening + step/output correlation",
        "details": [
          "Firmware clients now preserve step_sequence ordering and avoid regressions on OutputState.",
          "Connection health signals and disconnect handling were added for safer stepping."
        ],
        "files": [
          "CoreSim/src/RobotTwin.CoreSim/IPC/FirmwareClient.cs",
          "RobotWin/Assets/Scripts/CoreSim/FirmwareClient.cs"
        ]
      },
      {
        "date": "2026-01-05",
        "type": "implementation",
        "summary": "0xFF pin output semantics enforced",
        "details": [
          "Pins initialize as Unknown (0xFF) until an OutputState arrives.",
          "Prevents undriven pins from being interpreted as LOW before first output."
        ],
        "files": [
          "CoreSim/src/RobotTwin.CoreSim/IPC/FirmwareClient.cs",
          "RobotWin/Assets/Scripts/CoreSim/FirmwareClient.cs"
        ]
      },
      {
        "date": "2026-01-05",
        "type": "implementation",
        "summary": "CoreSim synchronous stepping API + deterministic config",
        "details": [
          "Added SimHost.StepOnce() for deterministic/headless stepping without background threads.",
          "Added DeterministicModeConfig with JSON load/save and a reference config."
        ],
        "files": [
          "CoreSim/src/RobotTwin.CoreSim/Host/SimHost.cs",
          "CoreSim/src/RobotTwin.CoreSim/Host/SimHostOptions.cs",
          "CoreSim/src/RobotTwin.CoreSim/Host/DeterministicModeConfig.cs",
          "docs/reference_deterministic_mode.json"
        ]
      },
      {
        "date": "2026-01-05",
        "type": "implementation",
        "summary": "Unity synchronous stepping API for external firmware",
        "details": [
          "Added SimHost.StepOnce(dtSeconds) and routed firmware/virtual MCU stepping through explicit dt."
        ],
        "files": ["RobotWin/Assets/Scripts/Game/SimHost.cs"]
      },
      {
        "date": "2026-01-05",
        "type": "implementation",
        "summary": "FirmwareEngine full pin output sampling",
        "details": [
          "OutputState sampling now uses VirtualMcu.SamplePinOutputs for all pins.",
          "Unknown pins remain 0xFF until configured as outputs."
        ],
        "files": ["FirmwareEngine/main.cpp", "FirmwareEngine/VirtualMcu.cpp"]
      },
      {
        "date": "2026-01-05",
        "type": "implementation",
        "summary": "NativeEngine co-sim step ordering (Unity)",
        "details": [
          "Native circuit stepping now happens inside the SimHost tick before pin sampling.",
          "Removes the one-tick lag for NativeEngine output updates."
        ],
        "files": ["RobotWin/Assets/Scripts/Game/SimHost.cs"]
      },
      {
        "date": "2026-01-05",
        "type": "documentation",
        "summary": "Unity stepping contract clarified",
        "details": [
          "Documented Native_Step vs Physics_Step responsibilities and call order."
        ],
        "files": ["docs/ROBOTWIN_UNITY.md"]
      },
      {
        "date": "2026-01-05",
        "type": "implementation",
        "summary": "Legacy interface labeling for fixed-size shared state",
        "details": [
          "Marked SharedState as legacy fixed-size interface in Unity bridge code."
        ],
        "files": ["RobotWin/Assets/Scripts/Core/Bridge_Interface.cs"]
      },
      {
        "date": "2026-01-05",
        "type": "documentation",
        "summary": "Realtime contract defined",
        "details": [
          "Documented master clock, step ordering, and deadline policy."
        ],
        "files": ["docs/REALTIME_CONTRACT.md"]
      },
      {
        "date": "2026-01-05",
        "type": "implementation",
        "summary": "Realtime observability ring buffer",
        "details": [
          "Added tick trace ring buffer and exposed it in the telemetry payload."
        ],
        "files": [
          "RobotWin/Assets/Scripts/Game/SimHost.cs",
          "RobotWin/Assets/Scripts/Debug/RemoteCommandServer.cs"
        ]
      },
      {
        "date": "2026-01-05",
        "type": "documentation",
        "summary": "Realtime fidelity/error budgets defined",
        "details": ["Specified default budgets and error tolerances per tier."],
        "files": ["docs/REALTIME_BUDGETS.md"]
      },
      {
        "date": "2026-01-05",
        "type": "implementation",
        "summary": "Active backend choice visible in Unity logs",
        "details": [
          "RunMode logs which backend is active when the mode starts."
        ],
        "files": ["RobotWin/Assets/Scripts/UI/RunMode/RunModeController.cs"]
      },
      {
        "date": "2026-01-05",
        "type": "decision",
        "summary": "Canonical firmware + circuit runtime selected",
        "details": [
          "FirmwareEngine is the authoritative firmware runtime for correctness.",
          "NativeEngine is the authoritative circuit/physics solver; Unity/CoreSim virtual paths are fallback/preview."
        ],
        "files": [
          "docs/ARCHITECTURE.md",
          "docs/implementation_plan.json",
          "docs/implementation_plan_todo.md"
        ]
      },
      {
        "date": "2026-01-05",
        "type": "implementation",
        "summary": "Runtime API audit gate added",
        "details": [
          "Added an audit script to catch editor-only API usage in runtime scripts.",
          "Hooked the audit into rt_tool validations."
        ],
        "files": ["tools/scripts/audit_runtime_apis.py", "tools/rt_tool.py"]
      },
      {
        "date": "2026-01-05",
        "type": "implementation",
        "summary": "Firmware host naming/pathing generalized",
        "details": [
          "SessionManager now supports firmware host overrides and a configurable executable name.",
          "CircuitController uses a generic firmware host field name and tooltip."
        ],
        "files": [
          "RobotWin/Assets/Scripts/Game/SessionManager.cs",
          "RobotWin/Assets/Scripts/Circuit/CircuitController.cs"
        ]
      },
      {
        "date": "2026-01-05",
        "type": "implementation",
        "summary": "Non-AVR external firmware guardrail",
        "details": [
          "External firmware setup now short-circuits with a clear warning when no supported MCU profiles exist."
        ],
        "files": ["RobotWin/Assets/Scripts/Game/SimHost.cs"]
      },
      {
        "date": "2026-01-05",
        "type": "implementation",
        "summary": "Build/log output audit added",
        "details": [
          "Added a build output audit script and hooked it into rt_tool validations.",
          "Audit report is written to logs/tools/build_output_audit.log."
        ],
        "files": ["tools/scripts/audit_build_outputs.py", "tools/rt_tool.py"]
      },
      {
        "date": "2026-01-05",
        "type": "implementation",
        "summary": "Windows realtime hardening applied to CoreSim loop",
        "details": [
          "Added high-resolution timer support and optional process/thread priority tuning.",
          "Introduced spin-wait scheduling to reduce jitter on short sleeps."
        ],
        "files": [
          "CoreSim/src/RobotTwin.CoreSim/Host/RealtimeHardening.cs",
          "CoreSim/src/RobotTwin.CoreSim/Host/RealtimeHardeningOptions.cs",
          "CoreSim/src/RobotTwin.CoreSim/Host/SimHost.cs",
          "CoreSim/src/RobotTwin.CoreSim/Host/SimHostOptions.cs"
        ]
      },
      {
        "date": "2026-01-05",
        "type": "implementation",
        "summary": "Tick jitter/overrun telemetry surfaced",
        "details": [
          "Collected tick timing stats (jitter, overrun count, tick duration).",
          "Exposed timing stats in Unity telemetry and Debug Console UI."
        ],
        "files": [
          "RobotWin/Assets/Scripts/Game/SimHost.cs",
          "RobotWin/Assets/Scripts/Debug/RemoteCommandServer.cs",
          "tools/debug_console/public/index.html",
          "tools/debug_console/public/app.js"
        ]
      },
      {
        "date": "2026-01-05",
        "type": "implementation",
        "summary": "Firmware host + realtime flags surfaced in telemetry",
        "details": [
          "Unity telemetry now includes firmware host path/name/pipe/mode plus realtime flag summary.",
          "Debug Console shows firmware host/mode/pipe in bridge status."
        ],
        "files": [
          "RobotWin/Assets/Scripts/Game/SimHost.cs",
          "RobotWin/Assets/Scripts/CoreSim/FirmwareClient.cs",
          "RobotWin/Assets/Scripts/Debug/RemoteCommandServer.cs",
          "tools/debug_console/public/index.html",
          "tools/debug_console/public/app.js",
          "RobotWin/Assets/Scripts/Game/SessionManager.cs"
        ]
      },
      {
        "date": "2026-01-05",
        "type": "implementation",
        "summary": "Realtime scheduler + fast-path solving added",
        "details": [
          "Added multi-rate scheduler with per-task budgets and frame budget enforcement.",
          "Implemented fast-path circuit reuse + input signature early-exit.",
          "Added firmware input change caching for realtime stepping."
        ],
        "files": [
          "RobotWin/Assets/Scripts/Game/RealtimeScheduleConfig.cs",
          "RobotWin/Assets/Scripts/Game/SimHost.cs"
        ]
      },
      {
        "date": "2026-01-05",
        "type": "implementation",
        "summary": "Realtime budget/fast-path telemetry surfaced",
        "details": [
          "Added realtime budget stats to telemetry payload and debug console UI."
        ],
        "files": [
          "RobotWin/Assets/Scripts/Debug/RemoteCommandServer.cs",
          "tools/debug_console/public/index.html",
          "tools/debug_console/public/app.js"
        ]
      },
      {
        "date": "2026-01-05",
        "type": "implementation",
        "summary": "Timestamped firmware outputs + backlog drop tracking",
        "details": [
          "Added output timestamps to the firmware protocol and step payloads.",
          "Clients track dropped OutputState sequences and stale output drops."
        ],
        "files": [
          "FirmwareEngine/Protocol.h",
          "FirmwareEngine/PipeManager.cpp",
          "CoreSim/src/RobotTwin.CoreSim/IPC/FirmwareClient.cs",
          "RobotWin/Assets/Scripts/CoreSim/FirmwareClient.cs",
          "RobotWin/Assets/Scripts/Game/SimHost.cs",
          "RobotWin/Assets/Scripts/Debug/RemoteCommandServer.cs",
          "tools/debug_console/public/app.js"
        ]
      },
      {
        "date": "2026-01-05",
        "type": "implementation",
        "summary": "Firmware host mode toggle wired into debug console",
        "details": [
          "Added firmware mode switch endpoint and UI toggle with restart hint.",
          "SessionManager now stores the preferred firmware host mode."
        ],
        "files": [
          "RobotWin/Assets/Scripts/Game/SessionManager.cs",
          "RobotWin/Assets/Scripts/Game/SimHost.cs",
          "RobotWin/Assets/Scripts/Debug/RemoteCommandServer.cs",
          "tools/debug_console/server.py",
          "tools/debug_console/public/index.html",
          "tools/debug_console/public/app.js"
        ]
      },
      {
        "date": "2026-01-05",
        "type": "implementation",
        "summary": "Next-event realtime scheduler with physics external stepping",
        "details": [
          "Switched realtime scheduling to a next-event loop with per-event budgeting.",
          "Physics stepping now supports external scheduler control."
        ],
        "files": [
          "RobotWin/Assets/Scripts/Game/SimHost.cs",
          "RobotWin/Assets/Scripts/Game/RealtimeScheduleConfig.cs",
          "RobotWin/Assets/Scripts/Game/NativePhysicsWorld.cs"
        ]
      },
      {
        "date": "2026-01-05",
        "type": "implementation",
        "summary": "Protocol negotiation flags + minor version tolerance",
        "details": [
          "Hello/HelloAck now advertises feature flags for timestamps/perf counters.",
          "Clients warn on minor version mismatches and disable stale-output dropping when unsupported."
        ],
        "files": [
          "FirmwareEngine/Protocol.h",
          "FirmwareEngine/PipeManager.cpp",
          "CoreSim/src/RobotTwin.CoreSim/IPC/FirmwareClient.cs",
          "RobotWin/Assets/Scripts/CoreSim/FirmwareClient.cs"
        ]
      },
      {
        "date": "2026-01-05",
        "type": "implementation",
        "summary": "Golden trace harness + fixtures",
        "details": [
          "Added a deterministic golden trace fixture and replay harness for firmware stepping.",
          "Fixture is copied to test output for stable replay validation."
        ],
        "files": [
          "CoreSim/tests/RobotTwin.CoreSim.Tests/GoldenTraceHarnessTests.cs",
          "CoreSim/tests/RobotTwin.CoreSim.Tests/Fixtures/golden_trace_v1.json",
          "CoreSim/tests/RobotTwin.CoreSim.Tests/RobotTwin.CoreSim.Tests.csproj"
        ]
      },
      {
        "date": "2026-01-05",
        "type": "implementation",
        "summary": "Protocol framing tests + payload bounds guard",
        "details": [
          "Added protocol header parsing guardrails for invalid magic/major and oversized payloads.",
          "Introduced unit tests covering framing rejection cases."
        ],
        "files": [
          "CoreSim/src/RobotTwin.CoreSim/IPC/FirmwareProtocol.cs",
          "CoreSim/tests/RobotTwin.CoreSim.Tests/ProtocolFramingTests.cs",
          "FirmwareEngine/PipeManager.cpp",
          "RobotWin/Assets/Scripts/CoreSim/FirmwareClient.cs"
        ]
      },
      {
        "date": "2026-01-05",
        "type": "implementation",
        "summary": ".rtwin workspace extraction tests expanded",
        "details": [
          "Added extraction coverage for workspace snapshot files and package manifest."
        ],
        "files": [
          "CoreSim/tests/RobotTwin.CoreSim.Tests/RtwinRoundTripTests.cs"
        ]
      },
      {
        "date": "2026-01-05",
        "type": "implementation",
        "summary": "Golden trace record/replay + realtime scheduler finalization",
        "details": [
          "Added golden trace recording/replay with diff output and metadata.",
          "Finalized next-event scheduling to include circuit-only events and external physics stepping.",
          "Protocol negotiation flags and bounds checks are now fully covered by tests."
        ],
        "files": [
          "CoreSim/tests/RobotTwin.CoreSim.Tests/GoldenTraceHarnessTests.cs",
          "CoreSim/tests/RobotTwin.CoreSim.Tests/Fixtures/golden_trace_v1.json",
          "RobotWin/Assets/Scripts/Game/SimHost.cs",
          "RobotWin/Assets/Scripts/Game/RealtimeScheduleConfig.cs",
          "RobotWin/Assets/Scripts/Game/NativePhysicsWorld.cs",
          "CoreSim/src/RobotTwin.CoreSim/IPC/FirmwareProtocol.cs",
          "CoreSim/tests/RobotTwin.CoreSim.Tests/FirmwareProtocolTests.cs",
          "FirmwareEngine/PipeManager.cpp"
        ]
      }
    ]
  },
  "phases": [
    {
      "id": "phase_0",
      "name": "Phase 0: Stabilization (Blocking/Quality Gates)",
      "goal": "Remove build blockers and lock in core tooling hygiene before deeper work.",
      "issues": [
        {
          "number": 167,
          "title": "Q0-01 Remove editor-only APIs from runtime builds (no System.Windows.Forms in player)"
        },
        {
          "number": 168,
          "title": "Q0-02 Generalize firmware host naming/pathing for non-Arduino boards"
        },
        {
          "number": 169,
          "title": "Q0-03 Non-AVR profile QA path (STM32/RPi selection should disable firmware cleanly)"
        },
        {
          "number": 170,
          "title": "Q0-04 Build/log output audit across tools (builds/ + logs/ consistency)"
        }
      ]
    },
    {
      "id": "phase_1",
      "name": "Phase 1: Foundation",
      "goal": "Ensure core circuit and firmware execution is correct and deterministic.",
      "issues": [
        {
          "number": 103,
          "title": "P0-01 Step/Output correlation in RTFW protocol"
        },
        {
          "number": 104,
          "title": "P0-02 CoreSim synchronous stepping API"
        },
        {
          "number": 105,
          "title": "P0-03 Unity synchronous stepping API for external firmware"
        },
        {
          "number": 106,
          "title": "P0-04 Define reference deterministic mode config"
        },
        {
          "number": 107,
          "title": "P0-05 FirmwareEngine full pin output sampling (PinToPort-based)"
        },
        {
          "number": 108,
          "title": "P0-06 Define 0xFF pin output semantics + enforce in clients"
        },
        {
          "number": 109,
          "title": "P0-07 Pipe reader hardening + connection health surfaced"
        },
        {
          "number": 110,
          "title": "P1-08 Decide canonical firmware runtime (authoritative path)"
        },
        {
          "number": 111,
          "title": "P1-09 Decide canonical circuit model (authoritative path)"
        },
        {
          "number": 112,
          "title": "P1-10 Fix NativeEngine co-sim step ordering (remove one-step lag)"
        },
        {
          "number": 113,
          "title": "P1-11 Clarify Unity stepping contract (Native_Step vs Physics_Step)"
        },
        {
          "number": 114,
          "title": "P1-12 Mark prototype/legacy interfaces (fixed-size SharedState)"
        },
        {
          "number": 115,
          "title": "P1-13 Cross-layer golden trace harness"
        },
        {
          "number": 184,
          "title": "P1-13b FirmwareEngine lockstep OutputState capture"
        },
        {
          "number": 116,
          "title": "P1-14 .rtwin round-trip tests"
        },
        {
          "number": 117,
          "title": "P1-15 Protocol framing tests (magic/version/bounds)"
        }
      ]
    },
    {
      "id": "phase_2",
      "name": "Phase 2: Realtime",
      "goal": "Achieve low-latency, jitter-free execution for live mode.",
      "issues": [
        {
          "number": 179,
          "title": "RT-15 Protocol version negotiation + feature flags"
        },
        {
          "number": 178,
          "title": "RT-14 Realtime budget/fast-path counters in telemetry"
        },
        {
          "number": 177,
          "title": "RT-13 Firmware host mode control (lockstep vs realtime) + UI toggle"
        },
        {
          "number": 176,
          "title": "RT-12 Telemetry surface for firmware host + realtime mode flags"
        },
        {
          "number": 175,
          "title": "RT-11 Tick jitter/overrun counters + telemetry surface"
        },
        {
          "number": 149,
          "title": "RT-09 Windows realtime hardening (priority/affinity/timers/no-alloc hot loops)"
        },
        {
          "number": 146,
          "title": "RT-06 Multi-rate stepping with a master clock (next-event scheduling)"
        },
        {
          "number": 148,
          "title": "RT-08 Timestamped protocol stream + backlog/drop policy"
        },
        {
          "number": 141,
          "title": "RT-01 Define Realtime Contract (deadline-first)"
        },
        {
          "number": 142,
          "title": "RT-02 Deadline-aware scheduler + per-simulation budgets"
        },
        {
          "number": 143,
          "title": "RT-03 Fast-Path + Corrective-Path (tiered realtime)"
        },
        {
          "number": 144,
          "title": "RT-04 Realtime circuit solving strategy (incremental + sparse + early-exit)"
        },
        {
          "number": 145,
          "title": "RT-05 Hybrid MCU/peripheral modeling for realtime (event queues)"
        },
        {
          "number": 147,
          "title": "RT-07 Observability/metrics + ring-buffer tracing (non-blocking)"
        },
        {
          "number": 150,
          "title": "RT-10 Define fidelity/error budgets per tier (numeric targets)"
        }
      ]
    },
    {
      "id": "phase_3",
      "name": "Phase 3: High Fidelity",
      "goal": "Add physical realism: thermal, environmental, and manufacturing imperfections.",
      "issues": [
        {
          "number": 161,
          "title": "HF-01 Thermal Simulation Subsystem"
        },
        {
          "number": 163,
          "title": "HF-03 Temperature Dependent Component Models"
        },
        {
          "number": 162,
          "title": "HF-02 Environmental Link (Wind and Ambient)"
        },
        {
          "number": 164,
          "title": "HF-04 Component Tolerance and Aging"
        },
        {
          "number": 165,
          "title": "HF-05 Electronic Noise Injection"
        },
        {
          "number": 180,
          "title": "HF-06 Per-part physical material properties (mass/friction/elasticity/strength)"
        },
        {
          "number": 181,
          "title": "HF-06b Sample component + regression validation for physical overrides"
        },
        {
          "number": 182,
          "title": "HF-06c Per-part NativePhysicsBody mapping (no equal mass split)"
        },
        {
          "number": 183,
          "title": "HF-06d Volume source-of-truth for mass realism"
        }
      ]
    },
    {
      "id": "phase_4",
      "name": "Phase 4: Raspberry Pi",
      "goal": "Integrate full system emulation (QEMU) for Linux/AI support.",
      "issues": [
        {
          "number": 152,
          "title": "RP-01 QEMU Process Lifecycle Management"
        },
        {
          "number": 159,
          "title": "RP-08 Shared Memory Transport Layer"
        },
        {
          "number": 153,
          "title": "RP-02 GPIO and Peripheral Bridge"
        },
        {
          "number": 157,
          "title": "RP-06 QEMU Display Output to Unity"
        },
        {
          "number": 154,
          "title": "RP-03 Virtual Camera Injection"
        },
        {
          "number": 158,
          "title": "RP-07 Network and WiFi Bridge"
        },
        {
          "number": 155,
          "title": "RP-04 IMU and Sensor Injection"
        },
        {
          "number": 156,
          "title": "RP-05 Time Synchronization Strategy"
        }
      ]
    },
    {
      "id": "phase_5",
      "name": "Phase 5: Polish & Optimization",
      "goal": "Optimize performance, clean up technical debt, and improve UX.",
      "issues": [
        {
          "number": 118,
          "title": "P2-16 NativeEngine sparse MNA solver + factor reuse"
        },
        {
          "number": 119,
          "title": "P2-17 NativeEngine adaptive convergence + early exit"
        },
        {
          "number": 120,
          "title": "P2-18 NativeEngine circuit islanding"
        },
        {
          "number": 121,
          "title": "P2-19 FirmwareEngine SyncInputs allocation optimization"
        },
        {
          "number": 122,
          "title": "P2-20 FirmwareEngine batch serial output messages (realtime)"
        },
        {
          "number": 123,
          "title": "P2-21 VirtualArduino PWM mapping for Uno + Mega"
        },
        {
          "number": 124,
          "title": "P2-22 VirtualArduino external interrupt modes (edge/level)"
        },
        {
          "number": 125,
          "title": "P2-23 NativeEngine AVR IO electrical modeling tier"
        },
        {
          "number": 126,
          "title": "P2-24 ADC reference/scaling rules consistency (end-to-end)"
        },
        {
          "number": 127,
          "title": "P2-25 Opt-in protocol trace stream for firmware stepping"
        },
        {
          "number": 128,
          "title": "P2-26 FirmwareEngine snapshot/restore for deterministic rewind"
        },
        {
          "number": 130,
          "title": "P3-28 RTFW schema single source of truth (codegen/shared)"
        },
        {
          "number": 131,
          "title": "P3-29 Centralize BVM parsing/writing shared C++ module"
        },
        {
          "number": 132,
          "title": "P3-30 Unify simulation clock across Unity/CoreSim/NativeEngine"
        },
        {
          "number": 133,
          "title": "P3-31 Approximation tiers enforcement (reference vs fast)"
        },
        {
          "number": 134,
          "title": "P3-32 Remove Unity/CoreSim namespace collisions"
        },
        {
          "number": 135,
          "title": "P3-33 Netlist-to-NativeEngine builder (full circuit in native)"
        },
        {
          "number": 136,
          "title": "P3-34 End-to-end replay system (firmware+circuit+physics)"
        }
      ]
    },
    {
      "id": "phase_6",
      "name": "Phase 6: User Interface",
      "goal": "Build the visual controls, menus, and interactive tools (Frontend).",
      "issues": [
        {
          "number": 129,
          "title": "P2-27 Make active backend choice visible in Unity logs/UI"
        }
      ]
    }
  ]
}
